{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Pablo\\\\dae_api\\\\src\\\\utils\\\\rutaPrivada.jsx\",\n    _s = $RefreshSig$();\n\n/* eslint-disable react/react-in-jsx-scope */\nimport { Outlet, useNavigate, Navigate } from 'react-router-dom';\nimport { useContext, useEffect } from 'react';\nimport AuthContext from '../context/AuthContext';\nimport dayjs from 'dayjs';\nimport jwt_decode from \"jwt-decode\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction RutaPrivada() {\n  _s();\n\n  const navigate = useNavigate();\n  const {\n    user,\n    authTokens,\n    setUser,\n    setAuthTokens\n  } = useContext(AuthContext);\n  useEffect(() => {\n    if (user) {\n      const usuario = jwt_decode(authTokens.access);\n      const isExpired = dayjs.unix(usuario.exp).diff(dayjs()) < 1;\n\n      if (user && isExpired) {\n        setUser(null);\n        setAuthTokens(null);\n        navigate(\"/login\");\n      }\n    } else {\n      return /*#__PURE__*/_jsxDEV(Navigate, {\n        to: \"/login\",\n        replace: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 14\n      }, this);\n    }\n  }, [user]);\n  return /*#__PURE__*/_jsxDEV(Outlet, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 10\n  }, this);\n}\n\n_s(RutaPrivada, \"+7M8Qt0P7MwU/fXlMwFvdbYQPCA=\", false, function () {\n  return [useNavigate];\n});\n\n_c = RutaPrivada;\nexport default RutaPrivada;\n\nvar _c;\n\n$RefreshReg$(_c, \"RutaPrivada\");","map":{"version":3,"names":["Outlet","useNavigate","Navigate","useContext","useEffect","AuthContext","dayjs","jwt_decode","RutaPrivada","navigate","user","authTokens","setUser","setAuthTokens","usuario","access","isExpired","unix","exp","diff"],"sources":["C:/Users/Pablo/dae_api/src/utils/rutaPrivada.jsx"],"sourcesContent":["/* eslint-disable react/react-in-jsx-scope */\r\nimport { Outlet, useNavigate ,Navigate } from 'react-router-dom';\r\nimport { useContext, useEffect } from 'react';\r\nimport AuthContext from '../context/AuthContext';\r\nimport dayjs from 'dayjs';\r\nimport jwt_decode from \"jwt-decode\";\r\n\r\nfunction RutaPrivada() {\r\n\r\n  const navigate = useNavigate();\r\n  \r\n  const { user, authTokens, setUser, setAuthTokens } = useContext(AuthContext);\r\n\r\n  useEffect(()=>{\r\n\r\n    if(user){\r\n      const usuario = jwt_decode(authTokens.access);\r\n      const isExpired = dayjs.unix(usuario.exp).diff(dayjs()) < 1;\r\n      if (user && isExpired) {\r\n          setUser(null)\r\n          setAuthTokens(null)\r\n          navigate(\"/login\")\r\n     \r\n        }}\r\n    else{\r\n      return <Navigate to=\"/login\" replace />\r\n    }\r\n\r\n  },[user])\r\n \r\n  \r\n\r\n  return <Outlet />;\r\n}\r\nexport default RutaPrivada;\r\n"],"mappings":";;;AAAA;AACA,SAASA,MAAT,EAAiBC,WAAjB,EAA8BC,QAA9B,QAA8C,kBAA9C;AACA,SAASC,UAAT,EAAqBC,SAArB,QAAsC,OAAtC;AACA,OAAOC,WAAP,MAAwB,wBAAxB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,YAAvB;;;AAEA,SAASC,WAAT,GAAuB;EAAA;;EAErB,MAAMC,QAAQ,GAAGR,WAAW,EAA5B;EAEA,MAAM;IAAES,IAAF;IAAQC,UAAR;IAAoBC,OAApB;IAA6BC;EAA7B,IAA+CV,UAAU,CAACE,WAAD,CAA/D;EAEAD,SAAS,CAAC,MAAI;IAEZ,IAAGM,IAAH,EAAQ;MACN,MAAMI,OAAO,GAAGP,UAAU,CAACI,UAAU,CAACI,MAAZ,CAA1B;MACA,MAAMC,SAAS,GAAGV,KAAK,CAACW,IAAN,CAAWH,OAAO,CAACI,GAAnB,EAAwBC,IAAxB,CAA6Bb,KAAK,EAAlC,IAAwC,CAA1D;;MACA,IAAII,IAAI,IAAIM,SAAZ,EAAuB;QACnBJ,OAAO,CAAC,IAAD,CAAP;QACAC,aAAa,CAAC,IAAD,CAAb;QACAJ,QAAQ,CAAC,QAAD,CAAR;MAED;IAAC,CARN,MASI;MACF,oBAAO,QAAC,QAAD;QAAU,EAAE,EAAC,QAAb;QAAsB,OAAO;MAA7B;QAAA;QAAA;QAAA;MAAA,QAAP;IACD;EAEF,CAfQ,EAeP,CAACC,IAAD,CAfO,CAAT;EAmBA,oBAAO,QAAC,MAAD;IAAA;IAAA;IAAA;EAAA,QAAP;AACD;;GA1BQF,W;UAEUP,W;;;KAFVO,W;AA2BT,eAAeA,WAAf"},"metadata":{},"sourceType":"module"}